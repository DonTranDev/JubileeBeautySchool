<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Apply – Jubilee Beauty School</title>

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;700&family=Poppins:wght@300;400;600&display=swap"
  />
  <link rel="stylesheet" href="styles.css" />
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
  />
  <link rel="icon" type="image/png" href="DECAL.png" />
</head>
<body>
  <!-- NAVBAR -->
  <header class="navbar">
    <div class="container">
      <div class="logo">
        <img src="DECAL.png" alt="Jubilee Beauty School logo" />
      </div>

      <nav>
        <button class="menu-toggle" onclick="toggleMenu()">
          <i class="fas fa-bars"></i>
        </button>
        <ul class="nav-links">
          <li><a href="index.html#home">Home</a></li>
          <li><a href="index.html#programs">Programs</a></li>
          <li><a href="index.html#gallery">Gallery</a></li>
          <li><a href="index.html#services">Services</a></li>
          <li><a href="index.html#about">About</a></li>
          <li><a href="index.html#contact">Contact</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <!-- APPLICATION SECTION -->
  <section class="contact" style="padding-top:6rem;">
    <h2 class="section-title">Application Form</h2>
    <div style="max-width: 700px; margin: 0 auto;">
      <p style="margin-bottom: 1.5rem; color:#1e2a39;">
        Please fill out the form below to apply to Jubilee Beauty School. We will review your
        application and contact you at the email or phone number you provide.
      </p>

      <form
        id="application-form"
        novalidate
        style="display:flex; flex-direction:column; gap:1rem;"
      >
        <div>
          <label for="name" style="font-weight:600;">Full Name</label><br />
          <input
            type="text"
            id="name"
            name="fullName"
            required
            style="width:100%; padding:0.7rem; border-radius:6px; border:1px solid #ccc;"
          />
        </div>

        <div>
          <label for="email" style="font-weight:600;">Email</label><br />
          <input
            type="email"
            id="email"
            name="email"
            required
            style="width:100%; padding:0.7rem; border-radius:6px; border:1px solid #ccc;"
          />
          <p
            id="email-error"
            style="color:#b91c1c; font-size:0.85rem; margin-top:0.25rem; display:none;"
          >
            Please enter a valid email address.
          </p>
        </div>

        <div>
          <label for="phone" style="font-weight:600;">Phone Number</label><br />
          <input
            type="tel"
            id="phone"
            name="phone"
            style="width:100%; padding:0.7rem; border-radius:6px; border:1px solid #ccc;"
          />
        </div>

        <div>
          <label for="program" style="font-weight:600;">Program of Interest</label><br />
          <select
            id="program"
            name="program"
            required
            style="width:100%; padding:0.7rem; border-radius:6px; border:1px solid #ccc;"
          >
            <option value="">Select a program</option>
            <option value="Cosmetologist">Cosmetologist</option>
            <option value="Esthetician">Esthetician</option>
            <option value="Hair Designer">Hair Designer</option>
            <option value="Master Esthetician">Master Esthetician</option>
            <option value="Manicurist">Manicurist</option>
            <option value="Barber">Barber</option>
          </select>
        </div>

        <div>
          <label for="message" style="font-weight:600;">Tell us a little about yourself / Questions</label><br />
          <textarea
            id="message"
            name="message"
            rows="5"
            style="width:100%; padding:0.7rem; border-radius:6px; border:1px solid #ccc;"
          ></textarea>
        </div>

        <button
          type="submit"
          id="submit-button"
          style="background:#d4af37; color:#1e2a39; border:none; padding:0.8rem 1.8rem; border-radius:999px; font-weight:600; cursor:pointer;"
        >
          Submit Application
        </button>

        <p
          id="status-message"
          style="font-size:0.9rem; margin-top:0.75rem;"
        ></p>
      </form>
    </div>
  </section>

  <footer>
    <p>© 2024 Jubilee Beauty School. All rights reserved.</p>
    <div class="social-icons">
      <a
        href="https://www.facebook.com/people/Julibee-Beauty-School/61565403652283/#"
        target="_blank"
        aria-label="Facebook"
      >
        <i class="fab fa-facebook-f"></i>
      </a>
      <a
        href="https://www.instagram.com/jubileebeautyschool/"
        target="_blank"
        aria-label="Instagram"
      >
        <i class="fab fa-instagram"></i>
      </a>
      <a
        href="https://canvas.instructure.com/"
        target="_blank"
        aria-label="Canvas"
      >
        <i class="fas fa-chalkboard-teacher"></i>
      </a>
    </div>
  </footer>

  <script src="script.js"></script>

  <!-- Page-specific JS for form behavior -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const form = document.getElementById('application-form');
      const emailInput = document.getElementById('email');
      const emailError = document.getElementById('email-error');
      const statusMessage = document.getElementById('status-message');
      const submitButton = document.getElementById('submit-button');

      // Web3Forms endpoint for static sites (works on GitHub Pages)
      const ENDPOINT_URL = 'https://api.web3forms.com/submit';

      // TODO: replace this with your actual Web3Forms access key
      const ACCESS_KEY = 'e9cbe5be-a0bb-403b-818c-0a8dfd8b30f6';

      function isValidEmail(value) {
        return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(value);
      }

      emailInput.addEventListener('input', () => {
        if (!emailInput.value) {
          emailError.style.display = 'none';
          emailInput.style.borderColor = '#ccc';
          return;
        }

        if (isValidEmail(emailInput.value)) {
          emailError.style.display = 'none';
          emailInput.style.borderColor = '#22c55e';
        } else {
          emailError.style.display = 'block';
          emailInput.style.borderColor = '#b91c1c';
        }
      });

      form.addEventListener('submit', async (e) => {
        e.preventDefault();
        statusMessage.textContent = '';
        statusMessage.style.color = '#1e293b';

        if (!form.checkValidity()) {
          form.reportValidity();
          return;
        }

        if (!isValidEmail(emailInput.value)) {
          emailError.style.display = 'block';
          emailInput.style.borderColor = '#b91c1c';
          emailInput.focus();
          return;
        }

        const fullName = document.getElementById('name').value.trim();
        const email = emailInput.value.trim();
        const phone = document.getElementById('phone').value.trim();
        const program = document.getElementById('program').value;
        const message = document.getElementById('message').value.trim();

        const formData = new FormData();
        formData.append('access_key', ACCESS_KEY);
        formData.append('subject', 'New Application – ' + fullName);
        formData.append('from_name', fullName);
        formData.append('from_email', email);
        formData.append('Full Name', fullName);
        formData.append('Email', email);
        formData.append('Phone', phone || 'Not provided');
        formData.append('Program of Interest', program);
        formData.append('About / Questions', message || 'Not provided');

        submitButton.disabled = true;
        submitButton.textContent = 'Submitting...';

        try {
          const response = await fetch(ENDPOINT_URL, {
            method: 'POST',
            body: formData
          });

          const data = await response.json();

          if (!response.ok || !data || data.success !== true) {
            throw new Error('Server error');
          }

          statusMessage.textContent = 'Thank you. Your application has been submitted.';
          statusMessage.style.color = '#16a34a';
          form.reset();
          emailInput.style.borderColor = '#ccc';
        } catch (error) {
          console.error(error);
          statusMessage.textContent =
            'Sorry, there was a problem submitting your application. Please try again later.';
          statusMessage.style.color = '#b91c1c';
        } finally {
          submitButton.disabled = false;
          submitButton.textContent = 'Submit Application';
        }
      });
    });
  </script>
</body>
</html>
